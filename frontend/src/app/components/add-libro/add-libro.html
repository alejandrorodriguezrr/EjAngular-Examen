<div class="page">
  <button type="button" class="back-btn" (click)="volver()" aria-label="Volver">
    <i class="material-icons">arrow_back</i>
  </button>

  <div class="form-card">
    <h2 class="title">Añadir libro</h2>

    <form #libroForm="ngForm" class="form">

      <input type="hidden" name="_id" #_id="ngModel"
             [(ngModel)]="libroService.libroSeleccionado._id">

      <div class="field">
        <label>Título</label>
        <input type="text" name="titulo" #titulo="ngModel"
               [(ngModel)]="libroService.libroSeleccionado.titulo"
               placeholder="Título del libro">
      </div>

      <div class="field">
        <label>Autor</label>
        <input type="text" name="autor" #autor="ngModel"
               [(ngModel)]="libroService.libroSeleccionado.autor"
               placeholder="Autor del libro">
      </div>

      <div class="field">
        <label>Editorial</label>
        <input type="text" name="editorial" #editorial="ngModel"
               [(ngModel)]="libroService.libroSeleccionado.editorial"
               placeholder="Editorial">
      </div>

      <div class="field">
        <label>Género</label>
        <input type="text" name="genero" #genero="ngModel"
               [(ngModel)]="libroService.libroSeleccionado.genero"
               placeholder="Género">
      </div>

      <div class="row2">
        <div class="field">
          <label>Precio (€)</label>
          <input type="number" name="precio" #precio="ngModel"
                 [(ngModel)]="libroService.libroSeleccionado.precio"
                 placeholder="Precio (€)">
        </div>

        <div class="field">
          <label>Stock</label>
          <input type="number" name="stock" #stock="ngModel"
                 [(ngModel)]="libroService.libroSeleccionado.stock"
                 placeholder="Stock disponible">
        </div>
      </div>

      <div class="field">
        <label>Imagen (PNG o JPG)</label>
        <input
          type="file"
          accept=".png,.jpg,.jpeg,image/png,image/jpeg"
          (change)="onFileSelected($event)"
        >
      </div>


      <div class="actions">
        <button class="btn grey" type="button" (click)="resetForm(libroForm)">RESET</button>
        <button class="btn" type="submit" (click)="addLibro(libroForm)">ENVIAR</button>
      </div>

    </form>
  </div>

  <div class="table-card">
    <h2 class="title">Listado de libros</h2>

    <table class="striped centered">
      <thead>
        <tr>
          <th>TÍTULO</th>
          <th>AUTOR</th>
          <th>EDITORIAL</th>
          <th>GÉNERO</th>
          <th>PRECIO</th>
          <th>STOCK</th>
          <th>ACCIONES</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let libro of libroService.libros">
          <td>{{ libro.titulo }}</td>
          <td>{{ libro.autor }}</td>
          <td>{{ libro.editorial }}</td>
          <td>{{ libro.genero }}</td>
          <td>{{ libro.precio }} €</td>
          <td>{{ libro.stock }}</td>

          <td class="acciones">
            <a href="#" (click)="editarLibro(libro); $event.preventDefault()">
              <i class="material-icons">edit</i>
            </a>

            <a href="#" (click)="BorrarLibro(libro._id); $event.preventDefault()">
              <i class="material-icons">delete</i>
            </a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>

<div *ngIf="clienteTopNombre">
  <h3>Cliente que mas ha comprado</h3>
  <p>{{clienteTopNombre}} - Total gastado : {{clienteTopTotal}}</p>
</div>